<div class="content-wrapper">
  <section class="content-header">
    <h1>
      Ecommerce <!-- TODO <small>Updated 9/21/2015 1:25pm</small> -->
    </h1>
  </section>
  <section class="content">
    <div class="row">
      <div class="col-xs-12">
        <div class="box">
          <div class="box-header">
            <h3 class="box-title"></h3>
            <div class="box-tools pull-right">
              <button type="button" class="btn btn-box-tool" data-toggle="modal" data-target="#report-config-modal" data-backdrop="static">
                <i class="fa fa-wrench"></i>
              </button> 
              <button type="button" class="btn btn-box-tool" ng-click="download()">
                <i class="fa fa-floppy-o"></li>
              </button>
              <input type="file" class="hidden js--report-save-as" nwsaveas="ecommerce-detail.csv">
            </div>
          </div>
          <div class="box-body">
            <div class="table-responsive">
              <table class="table table-bordered table-striped report-table">
                <thead>
                  <tr>
                    <th>
                      Transaction ID
                    </th>
                    <th>
                      Store ID
                    </th>
                    <th>
                      Order Amount
                    </th>
                    <th>
                      First Name
                    </th>
                    <th>
                      Last Name
                    </th>
                    <th>
                      Email Address
                    </th>
                    <th>
                      Order Date
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="order in orders">
                    <td>
                      {{order.TransactionId}}
                    </td>
                    <td>
                      {{order.StoreId}}
                    </td>
                    <td>
                      <span class="hidden">{{order.Payment.Amount}}</span>
                      {{order.Payment._AmountFormatted}}
                    </td>
                    <td>
                      {{order.Purchaser.ConsName.FirstName}}
                    </td>
                    <td>
                      {{order.Purchaser.ConsName.LastName}}
                    </td>
                    <td>
                      <a href="mailto:{{order.Purchaser.PrimaryEmail}}">{{order.Purchaser.PrimaryEmail}}</a>
                    </td>
                    <td>
                      <span class="hidden">{{order.Payment.PaymentDate}}</span>
                      {{order.Payment._PaymentDateFormatted}}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="overlay js--loading-overlay">
            <i class="fa fa-refresh fa-spin"></i>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<div class="modal fade" id="report-config-modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <form name="reportconfigform" id="report-config-form" ng-submit="updateReportConfig($event)">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">
            <span>&times;</span>
          </button>
          <h4 class="modal-title">
            Report Settings
          </h4>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>
              Date Range:
            </label>
            <div class="input-group input-group-full">
              <button type="button" class="btn btn-default btn-full text-left" id="report-config-datepicker">
                <i class="fa fa-calendar"></i> <span class="js--report-config-date-selected">Last 24 Hours</span> <i class="fa fa-caret-down pull-right"></i>
              </button>
            </div>
            <input type="hidden" name="startdate" id="report-config-startdate" ng-model="reportconfig.startdate">
            <input type="hidden" name="enddate" id="report-config-enddate" ng-model="reportconfig.enddate">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">
            Close
          </button>
          <button type="submit" class="btn btn-primary">
            Submit
          </button>
        </div>
      </form>
    </div>
  </div>
</div>